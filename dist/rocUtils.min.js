/*!
  * 常用javascript utils 方法
  * roc-utils v0.1.0
  * (c) 2020-2022 rocyuan
  * Email rocyuan666@163.com
  * Released under the MIT License.
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).rocUtils=e()}(this,(function(){"use strict";var t=function(t){return"[object String]"===Object.prototype.toString.call(t)},e=t,n=function(t,e,n){var r,a=function(){var a=arguments,o=this;if(r&&clearTimeout(r),n){var l=!r;l&&t.apply(o,arguments),r=setTimeout((function(){r=null}),e)}else r=setTimeout((function(){t.apply(o,a)}),e)};return a.cancel=function(){clearTimeout(r),r=null},a},r=function(t,e,n){var r,a,o,l,u=0;n||(n={leading:!0,trailing:!0});var i=function(){u=!1===n.leading?0:new Date,r=null,l=t.apply(a,o),r||(a=o=null)},c=function(){var c=new Date;u||!1!==n.leading||(u=c);var s=e-(c-u);return a=this,o=arguments,s<=0||s>e?(r&&(clearTimeout(r),r=null),u=c,l=t.apply(a,o),r||(a=o=null)):r||!1===n.trailing||(r=setTimeout(i,s)),l};return c.cancel=function(){clearTimeout(r),u=0,r=a=o=null},c};return{arrTrans:function(t,e){var n=[];return e.forEach((function(e,r){var a=Math.floor(r/t);n[a]||(n[a]=[]),n[a].push(e)})),n},asyncTasks:function(t){return t.then((function(t){return[null,t]})).catch((function(t){return[t]}))},checkCarNumber:function(t){return!!/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领][A-HJ-NP-Z][A-HJ-NP-Z0-9]{4,5}[A-HJ-NP-Z0-9挂学警港澳]$/.test(t)},checkCodeNumber:function(t){return!!/^[0-9]{6}$/.test(t)},checkCompanyIdCard:function(t){return!!/^[0-9A-HJ-NPQRTUWXY]{2}\d{6}[0-9A-HJ-NPQRTUWXY]{10}$/.test(t)},checkEmail:function(t){return!!/^(([^<>()[\]\.,;:\s@"]+(\.[^<>()[\]\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(t)},checkIdcard:function(t){var e,n,r=t.toUpperCase();if(!/(^\d{15}$)|(^\d{17}([0-9]|X)$)/.test(r))return!1;if(15==(e=r.length)){n=new RegExp(/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/);var a=r.match(n);if((i=new Date("19"+a[2]+"/"+a[3]+"/"+a[4])).getYear()==Number(a[2])&&i.getMonth()+1==Number(a[3])&&i.getDate()==Number(a[4])){var o=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),l=new Array("1","0","X","9","8","7","6","5","4","3","2"),u=0;for(r=r.substr(0,6)+"19"+r.substr(6,r.length-6),c=0;c<17;c++)u+=r.substr(c,1)*o[c];return r+=l[u%11],!0}return!1}if(18==e){n=new RegExp(/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/);var i;a=r.match(n);if((i=new Date(a[2]+"/"+a[3]+"/"+a[4])).getFullYear()==Number(a[2])&&i.getMonth()+1==Number(a[3])&&i.getDate()==Number(a[4])){var c;o=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2),l=new Array("1","0","X","9","8","7","6","5","4","3","2"),u=0;for(c=0;c<17;c++)u+=r.substr(c,1)*o[c];return l[u%11]==r.substr(17,1)}return!1}return!1},checkLat:function(t){return!!/^(\-|\+)?([0-8]?\d{1}\.\d{0,6}|90\.0{0,6}|[0-8]?\d{1}|90)$/.test(t)},checkLong:function(t){return!!/^(\-|\+)?(((\d|[1-9]\d|1[0-7]\d|0{1,3})\.\d{0,6})|(\d|[1-9]\d|1[0-7]\d|0{1,3})|180\.0{0,6}|180)$/.test(t)},checkPhone:function(t){return!!/^(13[0-9]|14[5-9]|15[012356789]|166|17[0-8]|18[0-9]|19[8-9])[0-9]{8}$/.test(t)},combineURLs:function(t,n){return n&&e(n)&&e(t)?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t},debounce:n,deepMargeObject:function(t,e){return function t(e,n){var r={};for(var a in e)r[a]=r[a]&&"[object Object]"===r[a].toString()?t(r[a],e[a]):r[a]=e[a];for(var o in n)r[o]=r[o]&&"[object Object]"===r[o].toString()?t(r[o],n[o]):r[o]=n[o];return r}(t,e)},encodeBase64:function(t){var e,n,r,a,o,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",i="",c="",s=0;do{r=(e=t.charCodeAt(s++))>>2,a=(3&e)<<4|(n=t.charCodeAt(s++))>>4,o=(15&n)<<2|(i=t.charCodeAt(s++))>>6,c=63&i,isNaN(n)?o=c=64:isNaN(i)&&(c=64),u=u+l.charAt(r)+l.charAt(a)+l.charAt(o)+l.charAt(c),e=n=i="",r=a=o=c=""}while(s<t.length);return u},decodeBase64:function(t){var e,n,r,a,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",u="",i="",c=0;/[^A-Za-z0-9\+\/\=]/g.exec(t)&&console.log("输入文本中有无效的base64字符。\n有效的base64字符为A-Z、A-Z、0-9、“+”、“/”和“=”\n解码时出现错误。"),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{e=o.indexOf(t.charAt(c++))<<2|(r=o.indexOf(t.charAt(c++)))>>4,n=(15&r)<<4|(a=o.indexOf(t.charAt(c++)))>>2,u=(3&a)<<6|(i=o.indexOf(t.charAt(c++))),l+=String.fromCharCode(e),64!=a&&(l+=String.fromCharCode(n)),64!=i&&(l+=String.fromCharCode(u)),e=n=u="",r=a=i=""}while(c<t.length);return unescape(l)},formatDate:function(t){var e=null,n=null,r=null,a=null,o=null,l=null,u=null,i=null,c=null,s=null,g=null,h=null,f=null,d=null,p=null;if(t&&"[object String]"===Object.prototype.toString.call(t)){var m=t.replace(/\//g,".").replace(/-/g,".").replace(/:/g,".").replace(/T/g," ").replace(" ",".").replace("Z","").split("."),b=2020,v=12,M=18,D=0,N=0,A=0,w=0;m.length>0&&!isNaN(m[0])&&(b=parseInt(m[0])),m.length>1&&!isNaN(m[1])&&(v=parseInt(m[1])),m.length>2&&!isNaN(m[2])&&(M=parseInt(m[2])),m.length>3&&!isNaN(m[3])&&(D=parseInt(m[3])),m.length>4&&!isNaN(m[4])&&(N=parseInt(m[4])),m.length>5&&!isNaN(m[5])&&(A=parseInt(m[5])),m.length>6&&!isNaN(m[6])&&(w=parseInt(m[6])),t=new Date(b,v-1,M,D,N,A,w)}return t&&"[object Date]"===Object.prototype.toString.call(t)&&(e=t.getFullYear(),r=(n=t.getMonth()+1)>=10?n:"0"+n,o=(a=t.getDate())>=10?a:"0"+a,u=(l=t.getHours())>=10?l:"0"+l,c=(i=t.getMinutes())>=10?i:"0"+i,g=(s=t.getSeconds())>=10?s:"0"+s,f=h=t.getMilliseconds(),d=h,p=h,h<10?(f="0"+h,d="00"+h,p="000"+h):h<100?(d="0"+h,p="00"+h):p="0"+h),{YYYY:e,MM:r,M:n,DD:o,D:a,hh:u,h:l,mm:c,m:i,ss:g,s:s,ms:h,ms2:f,ms3:d,ms4:p,dt:t,f1:e+"-"+r+"-"+o,f2:e+"年"+n+"月"+a+"日",f3:e+"-"+n+"-"+a+" "+u+":"+c,f4:l+":"+i+":"+s,f5:r+"-"+o,f6:e+"-"+r,f7:e+"年"+n+"月",f8:l+":"+i,f9:n+"月"+a+"日",notes:"YYYY（年），MM（月，补0），M（月，不补0），DD（日，补0），D（日，不补0），hh（时，补0），h（时，不补0），mm（分，补0），m（分，不补0），ss（秒，补0），s（秒，不补0），ms（毫秒，不补0），ms2（毫秒，补0到2位），ms3（毫秒，补0到3位），ms4（毫秒，补0到4位），其余的f1，f2，... 看格式就知道了！"}},formatTime:function(t,e){if(t){var n=new Date(t),r={"M+":n.getMonth()+1,"d+":n.getDate(),"H+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length)));return e}return""},getTimeInterval:function(t,e){var n=[0,0,0,0],r="",a=e>t?parseInt((e-t)/1e3):0;return n[0]=a>86400?parseInt(a/86400):0,a-=86400*n[0],n[1]=a>3600?parseInt(a/3600):0,a-=3600*n[1],n[2]=a>60?parseInt(a/60):0,n[3]=a-60*n[2],r=n[0]>0?n[0]+",":"",r+=n[0]<=0&&n[1]<=0?"":n[1]+",",(r+=n[0]<=0&&n[1]<=0&&n[2]<=0?"":n[2]+",")+(n[0]<=0&&n[1]<=0&&n[2]<=0&&n[3]<=0?"":n[3])},getUrlQuery:function(t){if(-1!=t.indexOf("?")){for(var e=new Object,n=t.split("?")[1].split("&"),r=0;r<n.length;r++)e[n[r].split("=")[0]]=n[r].split("=")[1];return e}},isAbsoluteURL:function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},isBoolean:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},isDate:function(t){return"[object Date]"===Object.prototype.toString.call(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},isNumber:function(t){return"[object Number]"===Object.prototype.toString.call(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)&&null!=t},isString:t,numberToChinese:function(t){if(!/^\d*(\.\d*)?$/.test(t))return"Number is wrong!";for(var e=new Array("零","一","二","三","四","五","六","七","八","九"),n=new Array("","十","百","千","万","亿","点",""),r=(""+t).replace(/(^0*)/g,"").split("."),a=0,o="",l=r[0].length-1;l>=0;l--){switch(a){case 0:o=n[7]+o;break;case 4:new RegExp("0{4}\\d{"+(r[0].length-l-1)+"}$").test(r[0])||(o=n[4]+o);break;case 8:o=n[5]+o,n[7]=n[5],a=0}a%4==2&&0!=r[0].charAt(l+2)&&0==r[0].charAt(l+1)&&(o=e[0]+o),0!=r[0].charAt(l)&&(o=e[r[0].charAt(l)]+n[a%4]+o),a++}if(r.length>1){o+=n[6];for(var u=0;u<r[1].length;u++)o+=e[r[1].charAt(u)]}return o},randomHexColor:function(){for(var t=Math.floor(16777216*Math.random()).toString(16);t.length<6;)t="0"+t;return"#"+t},randomNum:function(t,e){return parseInt(Math.random()*(e-t+1)+t)},randomRgbaColor:function(){var t=Math.floor(256*Math.random()),e=Math.floor(256*Math.random()),n=Math.floor(256*Math.random()),r=Math.random();return"rgba("+t+","+e+","+n+","+(r=r.toFixed(2))+")"},randomRgbColor:function(){return"rgb("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+")"},randomString:function(t,e){for(var n="",r=e?Math.round(Math.random()*(e-t))+t:t,a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],o=0;o<r;o++){n+=a[Math.round(Math.random()*(a.length-1))]}return n},showMonthFirstDay:function(){var t=new Date,e=new Date(t.getYear(),t.getMonth(),1),n=Number(e.getMonth())+1;1==String(n).length&&(n="0"+n);var r=e.getDate();return 1==String(r).length&&(r="0"+r),t.getFullYear()+"-"+n+"-"+r},showMonthLastDay:function(){var t=new Date,e=new Date(t.getYear(),t.getMonth()+1,1),n=new Date(e-864e5),r=Number(n.getMonth())+1;1==String(r).length&&(r="0"+r);var a=n.getDate();return 1==String(a).length&&(a="0"+a),t.getFullYear()+"-"+r+"-"+a},showWeekFirstDay:function(){var t=new Date,e=t.getDay();0==e?e=6:e-=1;var n=new Date(t-864e5*e),r=Number(n.getMonth())+1;1==String(r).length&&(r="0"+r);var a=n.getDate();return 1==String(a).length&&(a="0"+a),n.getFullYear()+"-"+r+"-"+a},showWeekLastDay:function(){var t=new Date,e=t.getDay();0==e?e=6:e-=1;var n=new Date(t-864e5*e),r=new Date(1e3*(n/1e3+518400)),a=Number(r.getMonth())+1;1==String(a).length&&(a="0"+a);var o=r.getDate();return 1==String(o).length&&(o="0"+o),r.getFullYear()+"-"+a+"-"+o},sortAscii:function(t){var e=new Array,n=0;for(var r in t)e[n]=r,n++;var a=e.sort(),o="";for(var l in a)o+=a[l]+t[a[l]];return o=o.replace(new RegExp("^\\&+|\\&+$","g"),"")},throttle:r,treeDataTranslate:function(t,e,n){void 0===e&&(e="id"),void 0===n&&(n="pid");for(var r=[],a={},o=0;o<t.length;o++)a[t[o][e]]=t[o];for(var l=0;l<t.length;l++)a[t[l][n]]&&t[l][e]!==t[l][n]?(a[t[l][n]].children||(a[t[l][n]].children=[]),a[t[l][n]].children.push(t[l]),t[l]._level=(a[t[l][n]]._level||0)+1):r.push(t[l]);return r}}}));
